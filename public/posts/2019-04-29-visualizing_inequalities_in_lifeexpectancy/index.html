<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#818ba1">
	<meta name="msapplication-TileColor" content="#818ba1">
<meta itemprop="name" content="Visualizing Inequalities in Life Expectancy">
<meta itemprop="description" content="United Nations life expectancy dataLife expectancy at birth is a measure of the average a living being is expected to live. It takes into account several demographic factors like gender, country, or year of birth.
Life expectancy at birth can vary along time or between countries because of many causes: the evolution of medicine, the degree of development of countries, or the effect of armed conflicts. Life expectancy varies between gender, as well.">


<meta itemprop="datePublished" content="2019-04-29T21:13:14-05:00" />
<meta itemprop="dateModified" content="2019-04-29T21:13:14-05:00" />
<meta itemprop="wordCount" content="1303">



<meta itemprop="keywords" content="R Markdown,plot," />
<meta property="og:title" content="Visualizing Inequalities in Life Expectancy" />
<meta property="og:description" content="United Nations life expectancy dataLife expectancy at birth is a measure of the average a living being is expected to live. It takes into account several demographic factors like gender, country, or year of birth.
Life expectancy at birth can vary along time or between countries because of many causes: the evolution of medicine, the degree of development of countries, or the effect of armed conflicts. Life expectancy varies between gender, as well." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2019-04-29-visualizing_inequalities_in_lifeexpectancy/" />
<meta property="article:published_time" content="2019-04-29T21:13:14-05:00" />
<meta property="article:modified_time" content="2019-04-29T21:13:14-05:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Visualizing Inequalities in Life Expectancy"/>
<meta name="twitter:description" content="United Nations life expectancy dataLife expectancy at birth is a measure of the average a living being is expected to live. It takes into account several demographic factors like gender, country, or year of birth.
Life expectancy at birth can vary along time or between countries because of many causes: the evolution of medicine, the degree of development of countries, or the effect of armed conflicts. Life expectancy varies between gender, as well."/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>Visualizing Inequalities in Life Expectancy</title>
	<link rel="stylesheet" href="/css/style.min.adb4e738c83b4cc0eea8000ca83f72188a2ac1fd188a1e6f7cea8a7fa75cd7b1.css" integrity="sha256-rbTnOMg7TMDuqAAMqD9yGIoqwf0Yih5vfOqKf6dc17E=" crossorigin="anonymous">
	
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp faster">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="/">Pablo Barajas</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="/posts/">Posts</a>
				<a href="/blog/">Blog</a>
				<a href="/about-hugo/">About</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<span class="hdr-social hide-in-mobile"><a href="https://www.linkedin.com/in/pabloibarajas/" target="_blank" rel="noopener me" title="Linkedin"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="mailto:bar09028@gmail.com" target="_blank" rel="noopener me" title="Email"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a><a href="https://github.com/barajap1" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="/posts/">Posts</a></li>
			<li><a href="/blog/">Blog</a></li>
			<li><a href="/about-hugo/">About</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Apr 29, 2019</span></div>
				<h1>Visualizing Inequalities in Life Expectancy</h1>
			</header>
			<div class="content">
				


<div id="united-nations-life-expectancy-data" class="section level2">
<h2>United Nations life expectancy data</h2>
<p>Life expectancy at birth is a measure of the average a living being is expected to live. It takes into account several demographic factors like gender, country, or year of birth.</p>
<p>Life expectancy at birth can vary along time or between countries because of many causes: the evolution of medicine, the degree of development of countries, or the effect of armed conflicts. Life expectancy varies between gender, as well. The data shows that women live longer that men. Why? Several potential factors, including biological reasons and the theory that women tend to be more health conscious.</p>
<p>Let’s create some plots to explore the inequalities about life expectancy at birth around the world. We will use a dataset from the United Nations Statistics Division, which is available <a href="http://data.un.org/Data.aspx?d=GenderStat&amp;f=inID:37&amp;c=1,2,3,4,5,6&amp;s=crEngName:asc,sgvEngName:asc,timeEngName:desc&amp;v=1">here</a></p>
<pre class="r"><code># This sets plot images to a nice size
options(repr.plot.width = 6, repr.plot.height = 6)

# Loading packages
library(dplyr)
library(tidyr)
library(ggplot2)

# Loading data
life_expectancy &lt;- read.csv(&quot;Data/UNdata.csv&quot;)

# Taking a look at the first few rows
head(life_expectancy)</code></pre>
<pre><code>##   Country.or.Area Subgroup      Year
## 1     Afghanistan   Female 2000-2005
## 2     Afghanistan   Female 1995-2000
## 3     Afghanistan   Female 1990-1995
## 4     Afghanistan   Female 1985-1990
## 5     Afghanistan     Male 2000-2005
## 6     Afghanistan     Male 1995-2000
##                                                          Source  Unit
## 1 UNPD_World Population Prospects_2006 (International estimate) Years
## 2 UNPD_World Population Prospects_2006 (International estimate) Years
## 3 UNPD_World Population Prospects_2006 (International estimate) Years
## 4 UNPD_World Population Prospects_2006 (International estimate) Years
## 5 UNPD_World Population Prospects_2006 (International estimate) Years
## 6 UNPD_World Population Prospects_2006 (International estimate) Years
##   Value Value.Footnotes
## 1    42              NA
## 2    42              NA
## 3    42              NA
## 4    41              NA
## 5    42              NA
## 6    42              NA</code></pre>
<p>Life expectancy of men vs. women by country
Let’s manipulate the data to make our exploration easier. We will build the dataset for our first plot in which we will represent the average life expectancy of men and women across countries for the last period recorded in our data (2000-2005).</p>
<pre class="r"><code># Subsetting and reshaping the life expectancy data
subdata &lt;- life_expectancy  %&gt;% filter(Year == &quot;2000-2005&quot;) %&gt;% 
                select(c(Country.or.Area, Subgroup, Value)) %&gt;% spread(Subgroup, Value)

# Taking a look at the first few rows
head(subdata)</code></pre>
<pre><code>##   Country.or.Area Female Male
## 1     Afghanistan     42   42
## 2         Albania     79   73
## 3         Algeria     72   70
## 4          Angola     43   39
## 5       Argentina     78   71
## 6         Armenia     75   68</code></pre>
<p>Visualize I
A scatter plot is a useful way to visualize the relationship between two variables. It is a simple plot in which points are arranged on two axes, each of which represents one of those variables.</p>
<p>Let’s create a scatter plot using <code>ggplot2</code> to represent life expectancy of males (on the x-axis) against females (on the y-axis). We will create a straightforward plot in this task, without many details. We will take care of these kinds of things shortly.</p>
<pre class="r"><code># Plotting male and female life expectancy
ggplot(subdata, aes(x= Male, y = Female)) + geom_point()</code></pre>
<p><img src="/posts/2019-04-29-Visualizing_Inequalities_in_LifeExpectancy_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Reference lines I
A good plot must be easy to understand. There are many tools in <code>ggplot2</code> to achieve this goal and we will explore some of them now. Starting from the previous plot, let’s set the same limits for both axes as well as place a diagonal line for reference. After doing this, the difference between men and women across countries will be easier to interpret.</p>
<p>After completing this task, we will see how most of the points are arranged above the diagonal and how there is a significant dispersion among them. What does this all mean?</p>
<pre class="r"><code># Adding an abline and changing the scale of axes of the previous plots
ggplot(subdata, aes(x= Male, y = Female)) + 
    geom_point() +
    scale_x_continuous(limits=c(35,85)) +
    scale_y_continuous(limits=c(35,85)) +
    geom_abline(intercept = 0, slope = 1, linetype = 2)</code></pre>
<p><img src="/posts/2019-04-29-Visualizing_Inequalities_in_LifeExpectancy_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Plot titles and axis labels
A key point to make a plot understandable is placing clear labels on it. Let’s add titles, axis labels, and a caption to refer to the source of data. Let’s also change the appearance to make it clearer.</p>
<pre class="r"><code># Adding labels to previous plot
ggplot(subdata, aes(x=Male, y=Female))+
  geom_point(colour=&quot;white&quot;, fill=&quot;chartreuse3&quot;, shape=21, alpha=.55, size=5)+
  geom_abline(intercept = 0, slope = 1, linetype=2)+
  scale_x_continuous(limits=c(35,85))+
  scale_y_continuous(limits=c(35,85))+
  labs(title=&quot;Life Expectancy at Birth by Country&quot;,
       subtitle=&quot;Years. Period: 2000-2005. Average.&quot;,
       caption=&quot;Source: United Nations Statistics Division&quot;,
       x=&quot;Males&quot;,
       y=&quot;Females&quot;)</code></pre>
<p><img src="/posts/2019-04-29-Visualizing_Inequalities_in_LifeExpectancy_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Highlighting remarkable countries I
Now, we will label some points of our plot with the name of its corresponding country. We want to draw attention to some special countries where the gap in life expectancy between men and women is significantly high. These will be the final touches on this first plot.</p>
<pre class="r"><code># Subseting data to obtain countries of interest
top_male &lt;- subdata %&gt;% arrange(Male-Female) %&gt;% head(3)
top_female &lt;- subdata %&gt;% arrange(Female-Male) %&gt;% head(3)

# Adding text to the previous plot to label countries of interest
ggplot(subdata, aes(x=Male, y=Female, label = Country.or.Area))+
  geom_point(colour=&quot;white&quot;, fill=&quot;chartreuse3&quot;, shape=21, alpha=.55, size=5)+
  geom_abline(intercept = 0, slope = 1, linetype=2)+
  scale_x_continuous(limits=c(35,85))+
  scale_y_continuous(limits=c(35,85))+
  labs(title=&quot;Life Expectancy at Birth by Country&quot;,
       subtitle=&quot;Years. Period: 2000-2005. Average.&quot;,
       caption=&quot;Source: United Nations Statistics Division&quot;,
       x=&quot;Males&quot;,
       y=&quot;Females&quot;) +
  geom_text(data=top_male, size = 3)+
  geom_text(data = top_female, size=3) +
  theme_bw()</code></pre>
<p><img src="/posts/2019-04-29-Visualizing_Inequalities_in_LifeExpectancy_files/figure-html/unnamed-chunk-6-1.png" width="672" />
How has life expectancy by gender evolved?
Since our data contains historical information, let’s see now how life expectancy has evolved in recent years. Our second plot will represent the difference between men and women across countries between two periods: 2000-2005 and 1985-1990.</p>
<p>Let’s start building a dataset called <code>subdata2</code> for our second plot.</p>
<pre class="r"><code># Subsetting, mutating and reshaping the life expectancy data
subdata2 &lt;- life_expectancy %&gt;% 
  filter(Year %in% c(&quot;1985-1990&quot;, &quot;2000-2005&quot;)) %&gt;% 
  mutate(Sub_Year=paste(Subgroup, Year, sep=&quot;_&quot;)) %&gt;% 
  mutate(Sub_Year=gsub(&quot;-&quot;, &quot;_&quot;, Sub_Year)) %&gt;% 
  select(-Subgroup, -Year) %&gt;% 
  spread(Sub_Year, Value) %&gt;%
  mutate(diff_Female = Female_2000_2005 - Female_1985_1990) %&gt;%
  mutate(diff_Male = Male_2000_2005 - Male_1985_1990)

# Taking a look at the first few rows
head(subdata)</code></pre>
<pre><code>##   Country.or.Area Female Male
## 1     Afghanistan     42   42
## 2         Albania     79   73
## 3         Algeria     72   70
## 4          Angola     43   39
## 5       Argentina     78   71
## 6         Armenia     75   68</code></pre>
<p>Visualize II
Now let’s create our second plot in which we will represent average life expectancy differences between “1985-1990” and “2000-2005” for men and women.</p>
<pre class="r"><code># Doing a nice first version of the plot with abline, scaling axis and adding labels
ggplot(subdata2, aes(x=diff_Male, y=diff_Female, label=Country.or.Area))+
  geom_point(colour=&quot;white&quot;, fill=&quot;chartreuse3&quot;, shape=21, alpha=.55, size=5)+
  geom_abline(intercept = 0, slope = 1, linetype=2)+
    scale_x_continuous(limits = c(-25,25)) +
    scale_y_continuous(limits = c(-25,25))</code></pre>
<p><img src="/posts/2019-04-29-Visualizing_Inequalities_in_LifeExpectancy_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code>  labs(title=&quot;Life Expectancy at Birth by Country in Years&quot;,
       subtitle=&quot;Difference between 1985-1990 and 2000-2005. Average.&quot;,
       caption=&quot;Source: United Nations Statistics Division&quot;,
       x=&quot;Males&quot;,
       y=&quot;Females&quot;)+
theme_bw()</code></pre>
<pre><code>## NULL</code></pre>
<p>Reference lines II
Adding reference lines can make plots easier to understand. We already added a diagonal line to visualize differences between men and women more clearly. Now we will add two more lines to help to identify in which countries people increased or decreased their life expectancy in the period analyzed.</p>
<pre class="r"><code># Adding an hline and vline to previous plots
ggplot(subdata2, aes(x=diff_Male, y=diff_Female, label=Country.or.Area))+
  geom_point(colour=&quot;white&quot;, fill=&quot;chartreuse3&quot;, shape=21, alpha=.55, size=5)+
  geom_abline(intercept = 0, slope = 1, linetype=2)+
  scale_x_continuous(limits=c(-25,25))+
  scale_y_continuous(limits=c(-25,25))+
  geom_hline(yintercept=0)+
  geom_vline(xintercept=0)+
  labs(title=&quot;Life Expectancy at Birth by Country&quot;,
       subtitle=&quot;Years. Difference between 1985-1990 and 2000-2005. Average.&quot;,
       caption=&quot;Source: United Nations Statistics Division&quot;,
       x=&quot;Males&quot;,
       y=&quot;Females&quot;)+
theme_bw()</code></pre>
<p><img src="/posts/2019-04-29-Visualizing_Inequalities_in_LifeExpectancy_files/figure-html/unnamed-chunk-9-1.png" width="672" />
Highlighting remarkable countries II
As we did in the first plot, let’s label some points. Concretely, we will point those three where the aggregated average life expectancy for men and women increased most and those three where decreased most in the period.</p>
<pre class="r"><code># Subseting data to obtain countries of interest
top &lt;- subdata2 %&gt;% arrange(diff_Male+diff_Female) %&gt;% head(3)
bottom &lt;- subdata2 %&gt;% arrange(-(diff_Male+diff_Female)) %&gt;% head(3)

# Adding text to the previous plot to label countries of interest
ggplot(subdata2, aes(x=diff_Male, y=diff_Female, label=Country.or.Area), guide=FALSE)+
  geom_point(colour=&quot;white&quot;, fill=&quot;chartreuse3&quot;, shape=21, alpha=.55, size=5)+
  geom_abline(intercept = 0, slope = 1, linetype=2)+
  scale_x_continuous(limits=c(-25,25))+
  scale_y_continuous(limits=c(-25,25))+
  geom_hline(yintercept=0, linetype=2)+
  geom_vline(xintercept=0, linetype=2)+
  labs(title=&quot;Life Expectancy at Birth by Country&quot;,
       subtitle=&quot;Years. Difference between 1985-1990 and 2000-2005. Average.&quot;,
       caption=&quot;Source: United Nations Statistics Division&quot;,
       x=&quot;Males&quot;,
       y=&quot;Females&quot;)+
  geom_text(data=top, size = 3)+
  geom_text(data = bottom, size=3) +
  theme_bw()</code></pre>
<p><img src="/posts/2019-04-29-Visualizing_Inequalities_in_LifeExpectancy_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>

			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="/tags/r-markdown">R Markdown</a></span><span class="tag"><a href="/tags/plot">plot</a></span>
				</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>1303 Words</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2019-04-29 19:13 -0700</p>
			</footer>
		</article>
		<div class="post-nav thin">
			<a class="next-post" href="/posts/2019-05-29-genderbias/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>Gender Bias in Graduate Admissions</span>
			</a>
			<a class="prev-post" href="/posts/peer_influence/">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>Peer Influence for a music-streaming company</span>
			</a>
		</div>
		<div id="comments" class="thin">
</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2019 <a href="/">Pablo Barajas</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>



	<script src="/js/bundle.min.4a9a0ac3d2217822c7865b4161e6c2a71de1d70492264337755427898dd718f6.js" integrity="sha256-SpoKw9IheCLHhltBYebCpx3h1wSSJkM3dVQniY3XGPY=" crossorigin="anonymous"></script>
	
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-147148594-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


</body>

</html>
